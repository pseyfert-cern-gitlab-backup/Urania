#============================================================================
# Created    : 2014-08-06
# Maintainer : Rafael Coutinho and Daniel O'Hanlon 
#============================================================================
package           V0hhFitter
version           v1r1

#============================================================================
# Structure
#============================================================================
branches          cmt doc dict V0hhFitter src scripts KShh
#============================================================================
# Used packages.
#============================================================================
private
# genconfuser.py cannot be used here
# Note: the tag must be set before including GaudiPolicy
apply_tag skip_genconfuser
end_private

use	GaudiPolicy	v*	
use	ROOT		v*	LCG_Interfaces
use	Reflex		v*	LCG_Interfaces
use	Boost		v*	LCG_Interfaces
use	GSL  		v*	LCG_Interfaces
use	sqlite 		v*	LCG_Interfaces

#============================================================================
# Define include file options
#============================================================================
#include_path      none
apply_pattern install_more_includes more=V0hhFitter

#============================================================================
# Generate Reflex dictionary
#============================================================================
apply_pattern reflex_dictionary_src                               \
          dictionary=V0hhFitter                                   \
          headerfiles=$(V0HHFITTERROOT)/dict/V0hhFitterDict.h         \
          selectionfile=$(V0HHFITTERROOT)/dict/V0hhFitterDict.xml     \
          options="-U__MINGW32__ --split=classdef"

#============================================================================
# Component library building rule
#============================================================================
library          V0hhFitterLib    ../src/*.cpp 		    \
	         ../$(tag)/dict/V0hhFitter/V0hhFitterDict_dict_classdef.cpp

#============================================================================
# Applications
#============================================================================
#Test
application		makeMinimalCruijffIssue								../tests/makeMinimalCruijffIssue.cpp
# MC fit CERN-THESIS-2015-XXX
application     B2KShh-MC-fitter-CERN-THESIS-2015-XXX	            ../KShh/MC-Sig/B2KShh-MC-fitter-CERN-THESIS-2015-XXX.cpp
application     B2KShh-MC-fitter-SingleCB-CERN-THESIS-2015-XXX      ../KShh/MC-Sig/B2KShh-MC-fitter-SingleCB-CERN-THESIS-2015-XXX.cpp
application     B2KShh-MC-fitter-CrossFeed-CERN-THESIS-2015-XXX     ../KShh/MC-Sig/B2KShh-MC-fitter-CrossFeed-CERN-THESIS-2015-XXX.cpp

application     B2KShh-MC-fitter-PartiallyBkg-CERN-THESIS-2015-XXX  ../KShh/MC-Bkg/B2KShh-MC-fitter-PartiallyBkg-CERN-THESIS-2015-XXX.cpp

# Data fit CERN-THESIS-2015-XXX 
application	B2KShh-fitter-CERN-THESIS-2015-XXX                  ../KShh/Data-Fit/B2KShh-fitter-CERN-THESIS-2015-XXX.cpp
application	B2KShh-fitter-SystII-combBkg-CERN-THESIS-2015-XXX   ../KShh/Data-Fit/B2KShh-fitter-SystII-combBkg-CERN-THESIS-2015-XXX.cpp
application	B2KShh-fitter-SystII-sigShape-CERN-THESIS-2015-XXX  ../KShh/Data-Fit/B2KShh-fitter-SystII-sigShape-CERN-THESIS-2015-XXX.cpp

# MC fit LHCB-ANA-2014-043
application	B2KShh-MC-fitter-CrossFeed-boost   ../KShh/MC-Sig/B2KShh-MC-fitter-CrossFeed-boost.cpp 
application	MC-Adder			   ../KShh/MC-Sig/MC-Adder.cpp
application	MC-Fitter			   ../KShh/MC-Sig/MC-Fitter.cpp
application	B2KShh-MC-fitter-PartiallyBkg-boost ../KShh/MC-Bkg/B2KShh-MC-fitter-PartiallyBkg-boost.cpp 

# Data fit 
#application	B2KShh-fitter ../KShh/Data-Fit/B2KShh-fitter.cpp 
#application	B2KShh-fitter-split-KSKpi ../KShh/Data-Fit/B2KShh-fitter-split-KSKpi.cpp 
application	DataAdder		  ../KShh/Data-Fit/DataAdder.cpp
application	ModelFitter		  ../KShh/Data-Fit/ModelFitter.cpp
application	sWeights		  ../KShh/Data-Fit/sWeights.cpp
application	Toyer			  ../KShh/Data-Fit/Toyer.cpp
application	SystI-Signal			 ../KShh/Data-Fit/SystI-Signal.cpp
application	SystI-CrossFeed			 ../KShh/Data-Fit/SystI-CrossFeed.cpp
application	SystI-PartReco			 ../KShh/Data-Fit/SystI-PartReco.cpp
#application	SystI-Gaussian			 ../KShh/Data-Fit/SystI-Gaussian.cpp
application	SystII-CombShape		 ../KShh/Data-Fit/SystII-CombShape.cpp
application	SystII-CombModel		 ../KShh/Data-Fit/SystII-CombModel.cpp
application	SystII-SigShape		 ../KShh/Data-Fit/SystII-SigShape.cpp
application	PlotToys		  ../KShh/Data-Fit/PlotToys.cpp
application	PlotSystI-Sig		  ../KShh/Data-Fit/PlotSystI-Sig.cpp
application	PlotSystI-PartReco		  ../KShh/Data-Fit/PlotSystI-PartReco.cpp
application	PlotSystI-CrossFeed		  ../KShh/Data-Fit/PlotSystI-CrossFeed.cpp
application	PlotSystII-CombModel	  ../KShh/Data-Fit/PlotSystII-CombModel.cpp
application	PlotSystII-CombShape	  ../KShh/Data-Fit/PlotSystII-CombShape.cpp
# Systematic studies
#application	B2KShh-fitter-SystI ../KShh/Syst/B2KShh-fitter-SystI.cpp 
#application	B2KShh-fitter-SystII-CombSlopes ../KShh/Syst/B2KShh-fitter-SystII-CombSlopes.cpp 
#application     ArgusConvGauss_example ../KShh/MC-Bkg/ArgusConvGauss_example.cpp
# DataBase 
application	createStructure   	 ../KShh/dB/createStructure.cpp
application	createDataBase   	 ../KShh/dB/createDataBase.cpp
application	createNewStructure   	 ../KShh/dB/createNewStructure.cpp
application	createNewDataBase   	 ../KShh/dB/createNewDataBase.cpp
application	readDB		   	 ../KShh/dB/readDB.cpp
application	createStructure_PartReco ../KShh/dB/createStructure_PartReco.cpp
application	createDataBase_PartReco	 ../KShh/dB/createDataBase_PartReco.cpp
application	readDB_PartReco	   	 ../KShh/dB/readDB_PartReco.cpp
#application	representConstraints-CrossFeed	../KShh/dB/representConstraints-CrossFeed.cpp
#application	representConstraints-PartReco	../KShh/dB/representConstraints-PartReco.cpp

# KSppbar analysis
#application	B2KSppbar-MC-fitter      ../KSppbar/MC-Sig/B2KSppbar-MC-fitter.cpp
#============================================================================
# define component library link options
#============================================================================
apply_pattern   linker_library library=V0hhFitterLib
macro_append    V0hhFitterLib_dependencies V0hhFitterGen

#### ROOT libraries ####
macro_append    ROOT_linkopts " -lHist -lTreePlayer -lGraf -lGraf3d -lGpad"
macro_append    ROOT_linkopts " -lMatrix -lMathCore -lMathMore -lTMVA"             

#### RooFit libraries ####
macro_append    ROOT_linkopts " -lRooFitCore -lRooFit -lRooStats"

#### Cintex libraries (Reflex -> CINT) ####
macro_append    ROOT_linkopts " -lCintex"

macro_append    Boost_linkopts " $(Boost_linkopts_program_options)"

#============================================================================
# Path to the Data/MC samples
#============================================================================
path V0HHFITTERDATA "root://eoslhcb.cern.ch//eos/lhcb/user/r/rsilvaco/V0hhFitter/"

#============================================================================
# Define component library link options
#============================================================================
macro V0hhFitter_use_linkopts $(use_linkopts)

#============================================================================
# Build Reflex dictionary
#============================================================================
apply_pattern reflex_dictionary_lib dictionary=V0hhFitter
